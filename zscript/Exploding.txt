//============================
// Explosive barrels & crates
//============================

class ExplosiveItemBang : Actor
{
	Default
	{
		Radius 4;
		Height 4;
		Renderstyle "Translucent";
		Alpha 0.9;
		+dontsplash
		+noclip
	}
	States
	{
	Spawn:
		CBNG ABCDEFGHIJKLMNOPQRS 2 Bright;
		CBNG TU 2;
		stop;
	}
}
class ExplosiveItemBangCrate : ExplosiveItemBang
{
	Default
	{
		Scale 0.6;
	}
}
class ExplosiveItemBangBarrel : ExplosiveItemBang
{
	Default
	{
		Scale 0.4;
	}
}

class Xbarrel1 : Actor
{
	Default
	{
		Health 50;
		Radius 12;
		Height 32;
		Mass 100;
		DeathSound "world/barrelx";
		Obituary "%o stood too close to an exploding barrel.";
		+PUSHABLE
		+SHOOTABLE
		+SOLID
		+NOBLOOD
	}
	States
	{
	Spawn:
		POSS A -1;
		Stop;
	Death:
		POSS B 0 A_SpawnItemEx("ExplosiveItemBangBarrel");
		POSS B 2 A_AlertMonsters;
		POSS C 2 A_Scream;
		POSS D 1 A_Explode;
		POSS D 1 A_SetTranslucent(.5);
		POSS EE 1 A_FadeOut;
		POSS F 2 A_NoBlocking;
		POSS GG 1 A_FadeOut;
		Stop;
	}
}
class Xbarrel2 : Xbarrel1
{
	Default
	{
		Health 20;
	}
}
class Xbarrel3 : Xbarrel1
{
	Default
	{
		Health 30;
	}
}

class Xcrate01 : Xbarrel1
{
	Default
	{
		-PUSHABLE
		Health 30;
		Radius 32;
		Height 64;
		Mass 200;
		Obituary "%o stood too close to an exploding crate.";
	}
	States
	{
	Death:
		POSS B 0 A_SpawnItemEx("ExplosiveItemBangCrate");
		Goto Super::Death+1;
	}
}
class Xcrate02 : Xcrate01{}