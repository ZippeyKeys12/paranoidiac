class RolfBellmer : PlayerPawn
{
	bool scientist,otis;
	override void Tick()
	{
		if(InStateSequence(CurState,SpawnState))
		{
			if(otis)
				SetStateLabel("OtisSpawn");
			else if(scientist)
				SetStateLabel("ScientistSpawn");
			else if(multiplayer)
			{
				if(A_HLCheckSkin()=='Freeman')
					SetStateLabel("FreemanSpawn");
				else if(A_HLCheckSkin()=='Shephard')
					SetStateLabel("ShephardSpawn");
				else if(A_HLCheckSkin()=='BlackOps')
					SetStateLabel("BlackOpsSpawn");
			}
		}
		else if(InStateSequence(CurState,FindState("ScientistSpawn"))&&!scientist)
			SetState(SpawnState);
		else if(InStateSequence(CurState,FindState("ScientistSee"))&&!scientist)
			SetState(SeeState);
		super.tick();
	}
	Default
	{
		+NOSKIN
		Height 60;
		Player.DisplayName "Rolf Bellmer";
		Player.ViewHeight 56;
		Player.AttackZOffset 24;
		Player.WeaponSlot 1,"HLCrowbar";
		Player.WeaponSlot 2,"HLPistol","HLDesertEagle","HLMagnum";
		Player.WeaponSlot 3,"HLHornetGun","HLShotgun";
		Player.WeaponSlot 4,"HLXBow","HLAssaultRifle";
		Player.WeaponSlot 5,"HLRPG";
		Player.WeaponSlot 6,"HLGluonGun";
		Player.StartItem "HLCrowbar";
		Player.StartItem "HEVSuit";
		Player.Face "HEV";
		Player.Portrait "HLHELMET";
	}
	States
	{
	Spawn:
		HLI1 ABCDEFGHIJKLMNOPQRSTUVWXYZ[\] 2;
		HLI2 AB 2;
		Loop;
	See:
		HLR1 ABCDEFGHIJKLMNOPQRSTUVW 1;
		Loop;
	Missile:
		HLA1 YZ[\] 1;
		HLA2 AB 1;
		HLA1 VUTRSQPONMLKJIHGFEDCBA 1;
		Goto Spawn;
	Pain:
		HLP1 A 0 A_HLPainSelect;
		HLP1 A 1 A_HLHEVPain;
		HLP1 DGJMPSU 1;
		Goto Spawn;
	Pain.Drowning:
		HLP1 A 0 A_HLDrownPainSelect;
		HLP1 A 1 A_PlaySound("HLPlayerDrowning",6);
		HLP1 DGJMPSU 1;
		Goto Spawn;
	Death:
		HLD1 A 0 A_HLDeathSelect;
		HLD1 A 2
		{
			A_PlaySound("HLPlayerHEVFail",7);
			A_PlaySound("HLPlayerHEVFailBeep",6);
			A_NoBlocking();
		}
		HLD1 BCDEFG 2;
		HLD1 H 2 A_PlaySound("halflife/weapons/bodydrop");
		HLD1 IJKL 2;
		HLD1 M -1;
		Stop;

	ScientistSpawn:
		HLI2 CDEFGHIJKLMNOPQ 5;
		Loop;
	ScientistSee:
		HLW2 ABCDEFGHIJKLMNOP 2;
		Loop;
	ScientistMissile:
		HLI2 C 12;
		Goto ScientistSpawn;
	ScientistPain:
		HLP2 A 1 A_PlaySound("scientist/pain",CHAN_VOICE);
		HLP2 BCDEFGHI 1;
		Goto ScientistSpawn;
	ScientistDeath:
		HLD2 A 1 A_PlaySound("scientist/death",CHAN_VOICE);
		HLD2 BC 1;
		HLD2 D 1 A_NoBlocking;
		HLD2 EFGHIJKLMNOPQRS 1;
		HLD2 T 1 A_PlaySound("halflife/weapons/bodydrop");
		HLD2 UVW 1;
		HLD2 X -1;
		Stop;

	OtisSpawn:
		BSI1 ABCDEFGHIJKLMNOPQRSTUVWXYZ[\] 2;
		BSI2 AB 2;
		Loop;
	OtisSee:
		BSR1 ABCDEFGHIJKLMNOPQRSTUVW 1;
		Loop;
	OtisMissile:
		BSA1 YZ[\] 1;
		BSA2 AB 1;
		BSA1 VUTRSQPONMLKJIHGFEDCBA 1;
		Goto OtisSpawn;
	OtisPain:
		BSP1 A 1
		{
			if(random(0,3))
				A_PlaySound("halflife/monsters/otis/pain",CHAN_VOICE);
		}
		BSP1 DGJMPSU 1;
		Goto OtisSpawn;
	OtisDeath:
		BSD1 A 2
		{
			A_PlaySound("halflife/monsters/otis/death",CHAN_VOICE);
			A_NoBlocking();
		}
		BSD1 BCDEFG 2;
		BSD1 H 2 A_PlaySound("halflife/weapons/bodydrop");
		BSD1 IJKL 2;
		BSD1 M -1;
		Stop;

	FreemanSpawn:
		GFI1 ABCDEFGHIJKLMNOPQRSTUVWXYZ[\] 2;
		GFI2 AB 2;
		Loop;
	FreemanSee:
		GFR1 ABCDEFGHIJKLMNOPQRSTUVW 1;
		Loop;
	FreemanMissile:
		GFA1 YZ[\] 1;
		GFA2 AB 1;
		GFA1 VUTRSQPONMLKJIHGFEDCBA 1;
		Goto FreemanSpawn;
	FreemanPain:
		GFP1 A 1 A_HLHEVPain;
		GFP1 DGJMPSU 1;
		Goto FreemanSpawn;
	FreemanPain.Drowning:
		HLP1 A 1 A_PlaySound("HLPlayerDrowning",6);
		HLP1 DGJMPSU 1;
		Goto FreemanSpawn;
	FreemanDeath:
		GFD1 A 2
		{
			A_PlaySound("HLPlayerHEVFail",7);
			A_PlaySound("HLPlayerHEVFailBeep",6);
			A_NoBlocking();
		}
		GFD1 BCDEFG 2;
		GFD1 H 2 A_PlaySound("halflife/weapons/bodydrop");
		GFD1 IJKL 2;
		GFD1 M -1;
		Stop;

	ShephardSpawn:
		OFI1 ABCDEFGHIJK 2;
		Loop;
	ShephardSee:
		OFR1 ABCDEFGHIJKLMNOPQRSTUVWXY 1;
		Loop;
	ShephardMissile:
		OFA2 \] 1;
		OFA3 ABCDEFGHIJK 1;
		Goto ShephardSpawn;
	ShephardPain:
		OFP1 ABCDEFGH 1;
		Goto ShephardSpawn;
	ShephardDeath:
		OFD1 A 1 A_NoBlocking;
		OFD1 BCDEFGHIJKLMNOPQRSTUVWXYZ[\] 1;
		OFD2 A 1 A_PlaySound("halflife/weapons/bodydrop");
		OFD2 BCDEF 1;
		OFD2 G -1;
		Stop;

	BlackOpsSpawn:
		BOI1 ABCDEFGHIJK 2;
		Loop;
	BlackOpsSee:
		BOR1 ABCDEFGHIJKLMNOPQRSTUVWXY 1;
		Loop;
	BlackOpsMissile:
		BOA2 \] 1;
		BOA3 ABCDEFGHIJK 1;
		Goto BlackOpsSpawn;
	BlackOpsPain:
		BOP1 ABCDEFGH 1;
		Goto BlackOpsSpawn;
	BlackOpsDeath:
		BOD1 A 1 A_NoBlocking;
		BOD1 BCDEFGHIJKLMNOPQRSTUVWXYZ[\] 1;
		BOD2 A 1 A_PlaySound("halflife/weapons/bodydrop");
		BOD2 BCDEF 1;
		BOD2 G -1;
		Stop;
	}
	override void PlayIdle()
	{
		if(otis&&InStateSequence(CurState,FindState("OtisSee")))
			SetStateLabel("OtisSpawn");
		else if(scientist&&InStateSequence(CurState,FindState("ScientistSee")))
			SetStateLabel("ScientistSpawn");
		else if(multiplayer)
		{
			if(A_HLCheckSkin()=='Freeman'&&InStateSequence(CurState,FindState("FreemanSee")))
				SetStateLabel("FreemanSpawn");
			else if(A_HLCheckSkin()=='Shephard'&&InStateSequence(CurState,FindState("ShephardSee")))
				SetStateLabel("ShephardSpawn");
			else if(A_HLCheckSkin()=='BlackOps'&&InStateSequence(CurState,FindState("BlackOpsSee")))
				SetStateLabel("BlackOpsSpawn");
		}
		else if(InStateSequence(CurState,SeeState))
			SetState(SpawnState);
	}
	override void PlayRunning()
	{
		if(otis&&InStateSequence(CurState,FindState("OtisSpawn")))
			SetStateLabel("OtisSee");
		else if(scientist&&InStateSequence(CurState,FindState("ScientistSpawn")))
			SetStateLabel("ScientistSee");
		else if(multiplayer)
		{
			if(A_HLCheckSkin()=='Freeman'&&InStateSequence(CurState,FindState("FreemanSpawn")))
				SetStateLabel("FreemanSee");
			else if(A_HLCheckSkin()=='Shephard'&&InStateSequence(CurState,FindState("ShephardSpawn")))
				SetStateLabel("ShephardSee");
			else if(A_HLCheckSkin()=='BlackOps'&&InStateSequence(CurState,FindState("BlackOpsSpawn")))
				SetStateLabel("BlackOpsSee");
		}
		else if(InStateSequence(CurState,SpawnState))
			SetState(SeeState);
	}
	override void PlayAttacking()
	{
		if(otis)
			SetStateLabel("OtisMissile");
		else if(scientist)
			SetStateLabel("ScientistMissile");
		else if(multiplayer)
		{
			if(A_HLCheckSkin()=='Freeman')
				SetStateLabel("FreemanMissile");
			else if(A_HLCheckSkin()=='Shephard')
				SetStateLabel("ShephardMissile");
			else if(A_HLCheckSkin()=='BlackOps')
				SetStateLabel("BlackOpsMissile");
		}
		else
			SetState(MissileState);
	}
	void A_HLPainSelect()
	{
		if(otis)
			SetStateLabel("OtisPain");
		else if(scientist)
			SetStateLabel("ScientistPain");
		else if(multiplayer)
		{
			if(A_HLCheckSkin()=='Freeman')
				SetStateLabel("FreemanPain");
			else if(A_HLCheckSkin()=='Shephard')
				SetStateLabel("ShephardPain");
			else if(A_HLCheckSkin()=='BlackOps')
				SetStateLabel("BlackOpsPain");
		}
	}
	void A_HLDrownPainSelect()
	{
		if(otis)
			SetStateLabel("OtisPain");
		else if(scientist)
			SetStateLabel("ScientistPain");
		else if(multiplayer)
		{
			if(A_HLCheckSkin()=='Freeman')
				SetStateLabel("FreemanPain.Drowning");
			else if(A_HLCheckSkin()=='Shephard')
				SetStateLabel("ShephardPain");
			else if(A_HLCheckSkin()=='BlackOps')
				SetStateLabel("BlackOpsPain");
		}
	}
	void A_HLDeathSelect()
	{
		if(otis)
			SetStateLabel("OtisDeath");
		else if(scientist)
			SetStateLabel("ScientistDeath");
		else if(multiplayer)
		{
			if(A_HLCheckSkin()=='Freeman')
				SetStateLabel("FreemanDeath");
			else if(A_HLCheckSkin()=='Shephard')
				SetStateLabel("ShephardDeath");
			else if(A_HLCheckSkin()=='BlackOps')
				SetStateLabel("BlackOpsDeath");
		}
	}
	void A_HLHEVPain()
	{
		A_Pain();
		if(!random(0,3))
		{
			if(health<25)
				A_PlaySound("HLPlayerPain25",7);
			else if(health<50)
				A_PlaySound("HLPlayerPain50",7);
			else if(health<75)
				A_PlaySound("HLPlayerPain75",7);
		}
	}
	name A_HLCheckSkin()
	{
		switch(CVar.GetCVar("v_multiskin",player).GetInt())
		{
		case 1:
			return 'Freeman';
		case 2:
			return 'Shephard';
		case 3:
			return 'BlackOps';
		}
		return 'Helmet';
	}
}